\begin{tikzpicture}
\draw  (-4,1.5) {} rectangle (-2,-0.5);
\draw[color=red,thick]  (-2,5.5) {} rectangle (0,3.5);
\draw[color=blue,thick]  (2,1.5) {} rectangle (-0,-0.5);
\draw  (-2,-4.5) {} rectangle (0,-2.5);
\node at (-1,4.5) { $(2\rightarrow1)$};
\node at (-1,4.1) {\textbf{RB}};
\node at (-3,0.5) { $(2\rightarrow1)$};
\node at (-3,0.1) { \textbf{RB}};
\node at (1,0.5) {$(2^2\rightarrow1)$};
\node at (1,0.1) {\textbf{RB}};
\node at (-1,-3.5) {$(2\rightarrow1)$};
\node at (-1,-3.9) {\textbf{RB}};
\node (v1) at (-4,4.5) {\huge $a_0$};
\node (v3) at (-2,7) {\huge $a_1$};
\node (v5) at (0,7) {\huge $a_2$};
\node (v6) at (-0.5,2.5) {\huge $a_3$};
\node (v10) at (2.5,2.5) {\huge $a_6$};
\node (v8) at (0.5,2.5) {\huge $a_4$};
\node (v9) at (1.5,2.5) {\huge $a_5$};
\node (v2) at (-3,1.5) {};
\node (v4) at (-1,5.5) {};
\node (v7) at (1,1.5) {};
\node (v12) at (-1,-2.5) {};
\node (v16) at (-1,3.5) {};
\node (v13) at (-3,-0.5) {};
\node (v11) at (1,-0.5) {};
\node (v14) at (-1,-4.5) {};

\draw  (10-4,1.5) {} rectangle (10-2,-0.5);
\draw[color=red,thick]  (10-2,5.5) {} rectangle (10,3.5);
\draw[color=blue,thick]  (12,1.5) {} rectangle (10,-0.5);
\draw  (10-2,-4.5) {} rectangle (10,-2.5);
\node at (10-1,4.5) {$(2\rightarrow1)$};
\node at (10-1,4.1) {\textbf{RB}};
\node at (10-3,0.5) {$(2\rightarrow1)$};
\node at (10-3,0.1) {\textbf{RB}};

\node at (11,0.5) {$(2^4\rightarrow1)$};
\node at (11,0.1) {\textbf{RB}};

\node at (10-1,-3.5) {$(2\rightarrow1)$};
\node at (10-1,-3.9) {\textbf{RB}};

\node at (10-4,4.5) {};
\node at (10-2,7) {};
\node (v17) at (9,6.5) {\huge $1$};
\node at (10-0.5,2.5) {};
\node (v24) at (7,-1.5) {\huge $B_1$};
\node (v20) at (9,2.5) {\huge $B_0$};
\node (v21) at (7,2.5) {\huge $1$};
\node at (10-3,1.5) {};
\node at (10-1,5.5) {};
\node (v26) at (9,-2.5) {};
\node at (10-1,-2.5) {};
\node at (10-1,3.5) {};
\node at (10-3,-0.5) {};
\node (v27) at (9,-4.5) {};
\node at (10-1,-4.5) {};
\node (v15) at (-1,-5.5) {\huge $A$};
\node (v28) at (9,-5.5) {\huge $B=A\oplus B_3\oplus B_0\oplus B_1=a_b$};
\node at (7,0.5) {};
\node at (9,-3.5) {};
\node at (9,4.5) {};
\node (v25) at (9,-1.5) {\huge $0$};
\draw[-triangle 90,line width=2pt]  (v1) edge (v2);
\draw[-triangle 90,line width=2pt]  (v3) edge (v4);
\draw[-triangle 90,line width=2pt]  (v5) edge (v4);
\draw[-triangle 90,line width=2pt]  (v6) edge (v7);
\draw[-triangle 90,line width=2pt]  (v8) edge (v7);
\draw[-triangle 90,line width=2pt]  (v9) edge (v7);
\draw[-triangle 90,line width=2pt]  (v10) edge (v7);
\draw[-triangle 90,line width=2pt]  (v11) edge (v12);
\draw[-triangle 90,line width=2pt]  (v13) edge (v12);
\draw[-triangle 90,line width=2pt]  (v14) edge (v15);
\node (v22) at (7,1.5) {};
\node (v23) at (7,-0.5) {};
\node (v18) at (9,5.5) {};
\node (v19) at (9,3.5) {};
\draw[-triangle 90,line width=2pt]  (v16) edge (v2);
\draw[-triangle 90,line width=2pt]  (v17) edge (v18);
\draw[-triangle 90,line width=2pt]  (v19) edge (v20);
\draw[-triangle 90,line width=2pt]  (v21) edge (v22);
\draw[-triangle 90,line width=2pt]  (v23) edge (v24);
\draw[-triangle 90,line width=2pt]  (v25) edge (v26);
\draw[-triangle 90,line width=2pt]  (v27) edge (v28);
\draw[-triangle 90,line width=2pt]  (v15) edge (v28);
\node at (9,9) {\Huge \textbf {Bob}};
\node at (-1,9) {\Huge \textbf {Alice}};
\end{tikzpicture}